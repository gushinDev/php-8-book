# Как работает Интернет

## Принципы работы Интернета
1. Сеть Интернет - множество компьютеров, соединенных друг с другом кабелями, радиоканалами, спутниковыми каналами ит.д. Передающей и принимающей стороне необходимо придерживаться ряда соглашений,регламентирующих и гарантирующих, что передача выполнится.
2. Такой набор правил называется - протокол передачи. Тоесть набор правил, который позволяет системам в рамках сети, обмениваться данными, в наиболее удобной форме.

## Протоколы передачи данных
1. Протоколы необходимы, тк в мире есть множество компьютеров, с разными ОС, архитектурой процессора, памятью ит.д.
2. В среде Web-программирования используется HTTP - протокол передачи гипертекста, основывающийся на TCP - протокол управления передачи данных.
3. Протоколы могут использоваться, как надстройки над другими протоколами, образуя слои до самого низкого уровня. В пределах каждой системы протоколы схематично, расположены ввиде стопки (стека). Каждая надстройка в идеале не должна знать о вышестоящем.

## Семейство TCP/IP
Протокол TCP очень тесно связан с IP, поэтому их объединяют в одну группу (семейство TCP/IP). 



### Основные особенности протокола
- Если доставка возможна, то гарантируется ее доставка до места назначения. Если канал поврежден, то потерянные фрагменты будут посылаться до тех пор, пока информация полностью не передастся.
- Передаваемая информация представлена ввиде потока, как при работе с файлами. Обмен данными по сети происходит также, как и локально.
- Основываясь на статическую информацию о работе сети, и таблицы маршрутизации система выбирает оптимальный путь передачи данных, за минимальное время.
- При передаче, данные разбиваются на фрагменты - пакеты, которые доставляются до адресата по отдельности. Разные пакеты, могут следовать по различным маршрутам в Интернете. В месте назначения эти пакеты собираются в нужном порядке. Если пакет не долетел, получатель запрашивает передающую систему, передать его еще раз.

## Адресация в Сети
Так как машин в Интернете много, их нужно идентифицировать. К тому же большинство систем поддерживают одновременную работу нескольких программ. Эти проблемы решаются стеком TCP/IP при помощи IP-адреса и номера порта.
- Для того, чтобы получить HTML страницу, недостаточно одного HTTP протокола, необходимы также: 
    - Канальный уровень - определяет правила передачи информации на физическом уровне (напр. медный провод)
    - Сетевой уровень - используется в IP (Internet Protocol - межсетевой протокол)
    - Транспортный уровень - TCP - решает проблему доставки сообщений (негарантированная - протокол UDP, гарантированной TCP - протокол управления передачей данных)
    - Прикладной уровень - происходит обмен информации в рамках почтовых программ (SMTP, IMAP), веб-сайтов (HTTP), преобразование доменов в IP (DNS)
- Во время запроса на веб-сайт, запрос упаковывается на каждом уровне в пакет, пока не доберется до физического уровня, а на другом конце драйвер, ОС, веб-сервер распакуют эти пакеты и прочитают послание. В ответ они вышлют HTML-страницу, которая упакуется в несколько пакетов и после доставки снова распакуется, уже на клиенте


### IP-adress
Для общения с другими машинами, каждая должна иметь уникальный идентификатор - IP adress
Ip - это четыре восьмиразрядных числа [0, 255], разделенные точками. Некоторые числа зарезервированы в служебных целях - 127.0.0.1 (localhost) - выделен для обращения к локальной машине, той на которой был произведен запрос.
- Когда мы ищем веб сайт (example.com) - тоесть мы хотим установить соединение с машиной с некоторым ip. Мы даем запрос нашему компьютеру, он делает запрос в соседние системы, лавинообразно следующие системы делают запросы на своих соседях ит.д.
- Количество ip адресов ограничено, поэтому сейчас идет переход с ipv4 на ipv6 - с 32 бит до 128 бит. 2a03:f480:1:23::ca::1 ТК в 128 битном формате ввиде десятичных чисел было бы слишком громоздким, его делят на 16-битные группы, разделенные двоеточием. Цифры представляются в шестнадцатиричном формате 0-9 - A-F, ведущие нули отбрасываются  00ca = ca 
- Группы, состоящие полностью из нулей - полностью отбрасываются 2a03:f480:0001:0023:0000:0000:0000:00ca = 2a03:f480:1:23::ca 

### Доменное имя
Для более удобной работы с ip адресами обычным людям, была придумана DNS (служба имен доменов) - распределенная база данных, которая преобразовывала имя в ip
- Доменное имя разделено точками, каждое сочетание слов образует новый уровень. ru - первый уровень, google.ru - второй уровень, example.google.ru - третий итд
- У доменных имен всегда есть точка в конце, но браузеры позволяют нам ее не указывать
- У одного IP адреса может быть несколько доменных имен, веб сервер способен узнать домен и выдать корректный ответ. 
- Также у одного домена может быть несколько ip адресов, это нужно для того, чтобы распределять нагрузку или искать более близкий адрес.
- Для ускорения процесса получения айпи по домену, при первом запросе данные кэшируются и последующие запросы получаются из кэша.

## Порт
На одном компьютере может быть запущено несколько серверов - веб-сервер (для запросов браузера), почтовый сервер ит.д. Чтобы отличать их друг от друга, используется порт - уникальный идентификатор, который указывается при установке соединения с хостом. 
- Есть стандартные порты: 80 - для протокола HRRP, 22 - SSH
- Порт 443 - стандартный для зашифрованного SSL соединения. 
- Стандартные порты не указываются, но если сервер использует нестандартный порт (4000) - то его нужно указывать в адресе явно example.com:4000
 